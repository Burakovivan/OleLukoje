@using OleLukoje.Models
@model List<Review>
<link href="~/Content/Stars.css" rel="stylesheet" />

<br />
<div class="col-md-6">
    @if (Model.Count != 0)
    {
        foreach (Review review in Model)
        {
            <div class="panel panel-default">
                <div class="panel-heading">
                    <div class="row">
                        <div class="col-md-7">
                            <h4>@review.UserName</h4>
                        </div>
                        <div class="col-md-5">
                            <h4>@review.GetDateTime</h4>
                        </div>
                    </div>
                    <div class="row" style="margin-top: 10px">
                        <div class="col-md-8">
                            <div id="reviewStars-input-result">
                                @for (int i = review.Stars ?? -1; i >= 0; i--)
                                {
                                    if (i == review.Stars)
                                    {
                                        <input readonly="readonly" id="star-@i-result" type="radio" checked="checked" />
                                        <label title="@i" for="star-@i-result"></label>
                                    }
                                    else
                                    {
                                        <input readonly="readonly" id="star-@i-result" type="radio" />
                                        <label title="@i" for="star-@i-result"></label>
                                    }
                                }
                            </div>
                        </div>
                    </div>
                </div>
                <div class="panel-body">
                    <div class="row">
                        <div class="col-md-2">
                            Text
                        </div>
                        <div class="col-md-10 text-justify">
                            @review.Text
                        </div>
                    </div>
                </div>
                <div class="panel-footer">
                    @if (review.Dignity != string.Empty)
                    {
                        <div class="row">
                            <div class="col-md-2">
                                <h4>Dignity:</h4>
                            </div>
                            <div class="col-md-10 text-justify">
                                <h4>@review.Dignity</h4>
                            </div>
                        </div>
                        <br />
                    }
                    @if (review.Defects != string.Empty)
                    {
                        <div class="row">
                            <div class="col-md-2">
                                <h4>Defects:</h4>
                            </div>
                            <div class="col-md-10 text-justify">
                                <h4>@review.Defects</h4>
                            </div>
                        </div>
                        <br />
                    }
                </div>
            </div>
        }
    }
    else
    {
        <h1 class="text-center">No reviews</h1>
    }
</div>

<div class="col-md-6" style="background-color: #f1f1f1; border-radius: 10px 10px;">
    @using (Ajax.BeginForm("AddReview", "Ad", null, new AjaxOptions { UpdateTargetId = "reviews" }, null))
    {
        <br />
        if (!User.Identity.IsAuthenticated)
        {
            <div class="row">
                <div class="col-md-3">Your name:</div>
                <div class="col-md-9">
                    <input name="UserName" style="display:block; height:auto; max-width:100%;  min-width:100%" type="text" />
                </div>
            </div>
            <br />
        }
        else
        {
            <input name="UserName" type="hidden" value="@User.Identity.Name" />
        }
        <div class="row">
            <div class="col-md-2">Text:</div>
            <div class="col-md-10">
                <textarea name="Text" style="display:block; height:auto; max-width:100%;  min-width:100%"></textarea>
            </div>
        </div>
        <br />
        <div class="row">
            <div class="col-md-2">Dignity:</div>
            <div class="col-md-10">
                <textarea name="Dignity" style="display:block; height:auto; max-width:100%; min-width:100%"></textarea>
            </div>
        </div>
        <br />
        <div class="row">
            <div class="col-md-2">Defects:</div>
            <div class="col-md-10">
                <textarea name="Defects" style="display:block; height:auto; max-width:100%;  min-width:100%"></textarea>
            </div>
        </div>
        <br />
        <div class="row">
            <div class="col-md-8">
                <div id="reviewStars-input">
                    <input onclick="SetStars(4)" id="star-4" type="radio" name="reviewStars" />
                    <label title="gorgeous" for="star-4"></label>
                    <input onclick="SetStars(3)" id="star-3" type="radio" name="reviewStars" />
                    <label title="good" for="star-3"></label>
                    <input onclick="SetStars(2)" id="star-2" type="radio" name="reviewStars" />
                    <label title="regular" for="star-2"></label>
                    <input onclick="SetStars(1)" id="star-1" type="radio" name="reviewStars" />
                    <label title="poor" for="star-1"></label>
                    <input onclick="SetStars(0)" id="star-0" type="radio" name="reviewStars" />
                    <label title="bad" for="star-0"></label>
                </div>
                <input id="stars" name="Stars" value="" type="hidden" />
            </div>
            <div class="col-md-4">
                <input name="AdId" value="@ViewBag.AdId" type="hidden" />
                <button type="submit" class="btn btn-block btn-success">Post</button>
            </div>
        </div>
    }
</div>

<script>
    $("#countReviews").empty().append("@Model.Count");
</script>