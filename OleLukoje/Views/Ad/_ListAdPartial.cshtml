@using OleLukoje.Models
@model IEnumerable<Ad>

<div style="margin-top:3em;"></div>
<hgroup class="title">
    <h1>@ViewBag.Title</h1>
</hgroup>

<link rel="stylesheet" href="~/Content/fa/css/font-awesome.css" />
<link rel="stylesheet" href="~/Content/bootstrap.css" />
<link rel="stylesheet" href="~/Content/MyStyle.css" />

@if (Model.ToList().Count != 0)
{
    foreach (Ad ad in Model)
    {
        <div class="container col-md-12 white-section" id="@ad.Id">
            <div class="row">
                @if (ViewBag.MyAds)
                {
                    <div class="delete-my-add-btn">
                        <button type="button" class="btn btn-danger" value="@ad.Id" onclick="DeleteAd(this.value)">X</button>
                    </div>
                }
                <div class="col-md-10 col-sm-12">
                    <div class="row">
                        <div class="header col-sm-8 col-xs-12">@Html.ActionLink(ad.Header, "SingleAdView", "Ad", new { Id = ad.Id }, null)</div>
                        <div class="price col-sm-4 col-xs-12">@ad.Price ₴</div>
                    </div>
                    <div class="row">
                        <div class="author col-sm-12">
                            by <a>@ad.UserProfile.UserName</a>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-12 categories">
                            @foreach (var category in ad.Categories.ToList())
                            {
                                <div class="category">
                                    @category.Name
                                </div>
                            }
                        </div>
                    </div>

                </div>
            </div>
        </div>
    }
}
else
{
    <h1>Ads is not found</h1>
}

<script>
    function DeleteAd(value) {
        var s = { 'idAd': value };
        $.ajax({
            url: '/Ad/DeleteAd',
            method: 'POST',
            data: JSON.stringify(s),
            contentType: 'application/json; charset=utf-8',
            dataType: "json",
            success: function (idAd) {
                var del = "#" + idAd;
                $(del).remove();
            },
        });
    }
</script>